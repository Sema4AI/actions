<!-- markdownlint-disable -->

# module `sema4ai.common.process`

Module with utilities for working with processes.

# Variables

- **IS_WINDOWS**

# Functions

______________________________________________________________________

## `is_process_alive`

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L103)

```python
is_process_alive(pid)
```

______________________________________________________________________

## `build_subprocess_kwargs`

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L256)

```python
build_subprocess_kwargs(cwd, env, **kwargs) → dict
```

______________________________________________________________________

## `build_python_launch_env`

**Args:**

- <b>`new_env_vars`</b>: If empty this means that this is an unmanaged env. In this case the environment used will be the same one used to run the action server itself.

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L273)

```python
build_python_launch_env(new_env_vars: 'dict[str, str]') → dict[str, str]
```

______________________________________________________________________

## `kill_process_and_subprocesses`

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L422)

```python
kill_process_and_subprocesses(pid)
```

______________________________________________________________________

## `check_output_interactive`

This has the same API as subprocess.check_output, but allows us to work with the contents being generated by the subprocess before the subprocess actually finishes.

:param on_stderr: A callable(string) (called from another thread) whenever output iswritten with stderr contents.

:param on_stdout: A callable(string) (called from another thread) whenever output iswritten with stdout contents.

:return: the stdout generated by the command.

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L450)

```python
check_output_interactive(
    *popenargs,
    timeout=None,
    progress_reporter: 'Optional[IProgressReporter]' = None,
    on_stderr=<function <lambda> at 0x103899da0>,
    on_stdout=<function <lambda> at 0x10389a020>,
    **kwargs
) → bytes
```

______________________________________________________________________

## `launch_and_return_future`

Launches a process and returns a future that can be used to wait for the process to finish and get its output. If the monitor is cancelled, the timeout is reached or regular completion is reached, a ProcessRunResult will be returned with the status set accordingly.

If the future itself is cancelled the process will be killed and an exception will set in the future.

**Args:**

- <b>`cmd`</b>: The command to run.
- <b>`environ`</b>: The environment variables to set.
- <b>`cwd`</b>: The current working directory.
- <b>`timeout`</b>: The timeout in seconds to timeout the process (note: no exception is raised when the timeout is reached, the ProcessRunResult will have the status set to ProcessResultStatus.TIMED_OUT).
- <b>`stdin`</b>: The contents to write to the process's stdin.
- <b>`monitor`</b>: The monitor to use to cancel the process.

**Returns:**
A Future[ProcessRunResult] which can be used to wait for the process to finishand get its output.

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L585)

```python
launch_and_return_future(
    cmd: 'Sequence[str]',
    environ: 'dict[str, str]',
    cwd: 'str',
    timeout: 'int' = 100,
    stdin: 'bytes' = b'\n',
    monitor: 'Optional[IMonitor]' = None
) → 'Future[ProcessRunResult]'
```

______________________________________________________________________

# Class `IProgressReporter`

## Properties

- `cancelled`

## Methods

______________________________________________________________________

### `set_additional_info`

The progress reporter shows the title and elapsed time automatically.

With this API it's possible to add additional info for the user to see.

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L442)

```python
set_additional_info(additional_info: 'str') → None
```

______________________________________________________________________

# Class `Process`

### `__init__`

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L174)

```python
__init__(
    args: 'List[str]',
    cwd: 'Optional[PathLike]' = None,
    env: 'Optional[Dict[str, str]]' = None
)
```

## Properties

- `pid`

- `returncode`

## Methods

______________________________________________________________________

### `is_alive`

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L188)

```python
is_alive()
```

______________________________________________________________________

### `join`

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L204)

```python
join()
```

______________________________________________________________________

### `start`

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L211)

```python
start(read_stderr: 'bool' = True, read_stdout: 'bool' = True, **kwargs) → None
```

______________________________________________________________________

### `stop`

[**Link to source**](https://github.com/sema4ai/actions/tree/master/common/src/sema4ai/common/process.py#L240)

```python
stop() → None
```

______________________________________________________________________

# Class `ProcessRunResult`

ProcessRunResult(stdout: 'str', stderr: 'str', returncode: 'int', status: 'ProcessResultStatus')

### `__init__`

```python
__init__(
    stdout: 'str',
    stderr: 'str',
    returncode: 'int',
    status: 'ProcessResultStatus'
) → None
```

# Enums

______________________________________________________________________

## `ProcessResultStatus`

### Values

- **FINISHED** = 0
- **TIMED_OUT** = 1
- **CANCELLED** = 2
